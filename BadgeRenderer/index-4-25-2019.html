<!DOCTYPE html>
<html>
<head>
	<link rel="manifest" href="manifest.webmanifest">
	<link rel="stylesheet" href="./styles.css" type="text/css">
	 <meta property="og:url"           content="https://jvarilla.github.io/BadgeRenderer/" />
 	 <meta property="og:type"          content="website" />
 	 <meta property="og:title"         content="My CPS Badges" />
 	 <meta property="og:description"   content="See my CPS Awards" />
 	 <meta property="og:image"         content="https://jvarilla.github.io/BadgeRenderer/assets/cps-sports-badge-logo.png" />
 	 <meta name="twitter:card" content="photo" />
	 <meta name="twitter:site" content="@jvarilla" />
	 <meta name="twitter:title" content="My CPS Sports Badges" />
	 <meta name="twitter:description" content="See my CPS Sports Badges" />
	 <meta name="twitter:image" content="https://jvarilla.github.io/BadgeRenderer/assets/cps-sports-badge-logo.png" />
	 <meta name="twitter:url" content="http://example.com/mypage.html" />
</head>
<body>
<script>
	if ('serviceWorker' in navigator) {
		window.addEventListener('load', function() {
		navigator.serviceWorker.register('./sw.js').then(function(registration) {
		//Registration was successful
		console.log('ServiceWorker registration succeeded')
	}, function(err) {
		//registration failed :(
		console.log('ServiceWorker registration failed')
		});
});
}
</script>

<!-- https://bit.ly/2T1Gp1M -->


<!-- Badge Renderer Redesign Start -->
	<div id="app">
		<div id="upperHalf">
			<div id="unlockBadge">
				<div id="needsToBeUnlocked">
					<div id="imgContainer">
					</div>
					<div><h1>Congratulations!</h1></div>
					<input type="text" id="keyInput" />
					<input type="button" id="unlockBadgeBtn" value="Unlock Badge"/>
				</div>
				<!-- Badge Display -->
				<div id="badgeDisplayed">
					<!-- side text -->
					<div id="sideText">
						<div id="detailsContainer">
							<img height="200px" width="auto" src="./assets/cps-sports-logo.bmp"/>
							<h1>Congratulations on your Achievement</h1>
							<p>On behalf of Chicago Public Schools Sports Administration we would like to congratulate you on your athletic achievements. A collecttion of you awards are displayed below. Select one to view and use the links to share with your friends and family.</p>
							<div id="socialMediaBtns"></div>
							<button id="pdfBtn">Print Badge</button>
						</div>
					</div>
					<div id="badgeStage">
						<h2 id="badgeNameDisplay">Click A Badge To View</h2>
						<img id="badge" src="./BadgeAssets/badge-sport/sport-logo-baseball.png" />
					</div>
					<!-- <button id="printBtn">Print Badge</button> -->
				</div>	
			</div>
		</div>
		<div id="lowerHalf">
			<h2>My Awards</h2>
			<div id="badges">
			</div>
		</div>
	</div>
</div>
<!-- Badge Renderer Redesign End -->
	<div class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>ctrl + a and ctrl + c to copy all of the html </h2>
            <textarea id="embedHTMLText"></textarea>
        </div>

    </div>

	<button>
		<div class="fb-share-button" data-href="https://jvarilla.github.io/BadgeRenderer/" data-layout="button" data-size="small" data-mobile-iframe="true"><a target="_blank" href="https://jvarilla.github.io/BadgeRenderer/" class="fb-xfbml-parse-ignore">Share</a></div>
		<div id="fb-root"></div>
	</button>
	<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/	sdk.js#xfbml=1&version=v3.2"></script>
	<div>
		
		<span id="feedback">Unlock A Badge</span>
		<br/>
		<h2 id="badgeUnlockStatus"></h2>
		<div id="badges"></div>
	</div>
	<a class="twitter-share-button"
  href="https://twitter.com/intent/tweet?text=Badge&url=https://jvarilla.github.io/BadgeRenderer/?a=123
">
	Tweet</a>
	<div id="scratchSpace"></div>
	<input type="text" hidden id="embedText"/>
	<script
  		src="jquery.js"></script>
  	<script src="bundle1.js"></script>
	<script>
		function generateBadgeHTML(badgeCanvasId) {
			return `<div><img src="${document.getElementById(badgeCanvasId).toDataURL('image/png', 1.0)}"/></div>`;
			}

		function handleCopyHTML(evt) {
			console.log(evt);
					
			let canvasId = evt.getAttribute("data-canvas");
			let html = generateBadgeHTML(canvasId);
			
			try {
				var txt;
				var data = new DataTransfer();
				data.items.add("text/plain", html);
				navigator.clipboard.writeText(data.items[0].type).then(function() {
				console.log("Copied to clipboard successfully!", data);
				alert("HTML Copied");
				}, function() {
				  console.error("Unable to write to clipboard. :-(");
				});
			} catch (err) {
				try {
					var copyText = document.getElementById("embedText");
					copyText.value = html;
					// $("#modal").css("display", "block");
					var modal = document.querySelector(".modal");
					modal.classList.toggle("show-modal");
					$("#embedHTMLText").val(html);
					console.log(copyText.value);
					var closeButton = document.querySelector(".close-button");
					closeButton.addEventListener("click", function() {
						modal.classList.toggle("show-modal");
					});

					//var copyText = document.getElementById("embedText");
					
				 	/* Select the text field */
				 	copyText.select();

					/* Copy the text inside the text field */
					document.execCommand("copy");

				 	/* Alert the copied text */
				 	//alert("Copied the text: " + copyText.value);
				} catch (err) {
					alert(err)
				}
			}
				
			return;
		}
	</script>
	<canvas id="myCertificate" style="background-color:white;display:none" height="800px" width="1150px"></canvas>

<!-- 	<script src="ui.js"></script> -->
</body>
</html>